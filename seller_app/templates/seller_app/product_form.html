<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ form.instance.pk|yesno:"Edit Product,Add New Product" }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        // Function to redirect when modal close button is clicked
        function redirectToProductList() {
            window.location.href = "{% url 'seller_app:product_list' %}";
        }

        // Automatically show the modal when the page loads
        window.onload = function () {
            const productModal = new bootstrap.Modal(document.getElementById('productModal'));
            productModal.show();
        };
    </script>
</head>
<body>

<!-- Modal for Add/Edit -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="productModalLabel">
            {% if form.instance.pk %}
                Edit Product
            {% else %}
                Add New Product
                
            {% endif %}
        </h5>
      
        <button type="button" class="btn-close" aria-label="Close" onclick="redirectToProductList()"></button>
      </div>
      <div class="modal-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Product Name Field -->
            <div class="mb-3">
                <label for="id_name" class="form-label">Product Name</label>
                {{ form.name }}
            </div>
            
            <!-- Product Description Field -->
            <div class="mb-3">
                <label for="id_description" class="form-label">Description</label>
                {{ form.description }}
            </div>
            
            <!-- Product Price Field -->
            <div class="mb-3">
                <label for="id_price" class="form-label">Price</label>
                {{ form.price }}
            </div>
            
            <!-- Product Stock Field -->
            <div class="mb-3">
                <label for="id_stock" class="form-label">Stock</label>
                {{ form.stock }}
            </div>
            
            <!-- Product Image Field -->
            <div class="mb-3">
                <label for="id_image" class="form-label">Image</label>
                {{ form.image }}
            </div>
            
            <!-- Product Category Field -->
            <div class="mb-3">
                <label for="id_category" class="form-label">Category</label>
                {{ form.category }}
            </div>
            
            <!-- Submit and Cancel Buttons -->
            <div class="mb-3">
                <button type="submit" class="btn btn-success w-100">Save</button>
                <!-- Cancel Button with Redirect -->
                <a href="{% url 'seller_app:product_list' %}" class="btn btn-secondary w-100 mt-2">Cancel</a>
            </div>
            
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS (for modal functionality) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
